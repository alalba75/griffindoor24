<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Other Stuff ? GriffinDoor24</title>
  <meta name="description" content="Community school information: books, uniforms, timetables and special events." />

  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="styles.css?v=20260113-900" />

  <link rel="canonical" id="canonical" href="">
  <meta property="og:url" id="ogurl" content="">
</head>

<body>
  <div id="site-header"></div>

  <main class="container">

    <section class="hero">
      <h2>Other Stuff</h2>
      <p>Community questions and tips about local schools.</p>
    </section>

    <section class="grid">
      <article class="card span-12" id="schoolstuff">

        <form name="schoolstuff"
              method="POST"
              data-netlify="true"
              netlify-honeypot="bot-field"
              action="/thanks.html">

          <input type="hidden" name="form-name" value="schoolstuff">

          <p style="display:none;">
            <label>Don?t fill this out: <input name="bot-field"></label>
          </p>

          <p>
            <label>Subject<br>
              <select name="subject" required
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);">
                <option value="" disabled selected>Select one?</option>
                <option>Books</option>
                <option>Uniforms</option>
                <option>Timetables</option>
                <option>Special events</option>
                <option>Fireworks sighting</option>
                <option>Otherstuff</option>
              </select>
            </label>
          </p>

          <p>
            <label>Question / Topic<br>
              <input type="text" name="question" required
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);">
            </label>
          </p>

          <p>
            <label>Details<br>
              <textarea name="details" rows="6" required
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);"></textarea>
            </label>
          </p>

          <p>
            <label>Your name (optional)<br>
              <input type="text" name="name"
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);">
            </label>
          </p>

          <p>
            <label>Email (optional)<br>
              <input type="email" name="email"
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);">
            </label>
          </p>

          <p>
            <label>Suburb (optional)<br>
              <input type="text" name="suburb"
                style="width:100%; padding:10px; border-radius:12px; border:1px solid rgba(0,0,0,0.14);">
            </label>
          </p>

          <p>
            <label>
              <input type="checkbox" name="consent" required>
              I won?t include private personal information about students, families or staff.
            </label>
          </p>

          <button class="btn primary" type="submit">Send</button>
        </form>

      </article>
    </section>

  </main>

  <div id="site-footer"></div>
  <script src="script.js?v=20260116-184342" defer></script>
<section class="card" style="margin-top:16px;">
  <h3>Share a photo</h3>
  <p class="small">Pictures only (JPG/PNG/WebP). Max 5 MB. Uploads go to review before appearing publicly.</p>

  <form id="os-upload-form" style="margin-top:12px;">
    <input id="os-file" type="file" accept="image/*" />
    <button class="btn primary" type="submit">Upload</button>
    <div class="small" id="os-upload-status" style="margin-top:10px;"></div>
  </form>
</section>

<section class="card" style="margin-top:16px;">
  <h3>Approved photos</h3>
  <div id="os-gallery" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:12px; margin-top:12px;"></div>
  <div class="small" id="os-gallery-status" style="margin-top:10px;"></div>
</section>

<script>
(function () {
  var CLOUD_NAME = "dos7e8gdd";
  var UPLOAD_PRESET = "gd24_otherstuff_pending";

  var form = document.getElementById("os-upload-form");
  var fileInput = document.getElementById("os-file");
  var statusEl = document.getElementById("os-upload-status");

  function setStatus(msg) { statusEl.textContent = msg; }

  form.addEventListener("submit", async function (e) {
    e.preventDefault();
    setStatus("");

    var f = fileInput.files && fileInput.files[0];
    if (!f) { setStatus("Choose an image first."); return; }
    if (!f.type || f.type.indexOf("image/") !== 0) { setStatus("Images only."); return; }
    if (f.size > (5 * 1024 * 1024)) { setStatus("Max size is 5 MB."); return; }

    setStatus("Uploading for review...");

    var fd = new FormData();
    fd.append("file", f);
    fd.append("upload_preset", UPLOAD_PRESET);
    fd.append("folder", "griffindoor24/otherstuff/pending");

    try {
      var url = "https://api.cloudinary.com/v1_1/" + encodeURIComponent(CLOUD_NAME) + "/image/upload";
      var r = await fetch(url, { method: "POST", body: fd });
      if (!r.ok) { setStatus("Upload failed."); return; }
      setStatus("Uploaded. It will appear after approval.");
      fileInput.value = "";
    } catch (err) {
      setStatus("Upload error.");
    }
  });

  async function loadGallery() {
    var g = document.getElementById("os-gallery");
    var gs = document.getElementById("os-gallery-status");
    gs.textContent = "Loading...";

    try {
      var r = await fetch("/.netlify/functions/otherstuff-list", { cache: "no-store" });
      var j = await r.json();
      var items = (j && j.items) ? j.items : [];

      g.innerHTML = "";
      items.sort(function (a, b) { return String(b.created_at).localeCompare(String(a.created_at)); });

      items.forEach(function (it) {
        var card = document.createElement("div");
        card.className = "card";
        card.style.padding = "10px";

        var img = document.createElement("img");
        img.src = it.secure_url;
        img.alt = "Community upload";
        img.loading = "lazy";
        img.style.width = "100%";
        img.style.height = "auto";
        img.style.borderRadius = "12px";
        img.style.display = "block";

        card.appendChild(img);
        g.appendChild(card);
      });

      gs.textContent = items.length ? "" : "No approved photos yet.";
    } catch (e) {
      gs.textContent = "Gallery unavailable.";
    }
  }

  loadGallery();
})();
</script>

</html>



